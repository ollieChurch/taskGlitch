# Task Dependencies

**Phase:** 3 | **Version:** 0.17 | **Status:** Complete

## Problem

Some tasks must be completed before others can begin. There is no way to express this relationship. For example, "Design mockups" must happen before "Implement UI", but the scheduler doesn't know this.

## Requirements

### Core

- [x] Allow a task to be marked as "depends on" one or more other tasks
- [x] A task with unresolved dependencies is automatically considered blocked (integrates with blocked-tasks feature)
- [x] When all dependency tasks are completed, the dependent task automatically unblocks
- [x] The scheduler should respect dependency ordering — never schedule a dependent task before its prerequisites

### UX

- [x] In the task edit modal, add a "Depends on" field that allows selecting other tasks
- [x] Use a searchable dropdown (the existing multiselect component may work)
- [x] Show dependency relationships on task cards:
  - On the dependent task: "Blocked by: Task A, Task B"
  - On the prerequisite task: "Blocks: Task C" (nice to have)
- [x] Prevent circular dependencies (A depends on B, B depends on A)

### Data Model

- [x] Add to task schema: `dependsOn` (array of task IDs, default empty)
- [x] Ensure backward compatibility — existing tasks default to no dependencies

### Scheduling

- [x] When generating a schedule, sort tasks so prerequisites come before dependents
- [x] If a prerequisite is not selected for the schedule, the dependent task should also be excluded (or included with a warning)

### Edge Cases

- [x] Dependency task is deleted — remove it from all `dependsOn` arrays
- [x] Dependency task is completed outside of a schedule — auto-unblock dependents
- [x] Chain dependencies (A -> B -> C) should work correctly
- [x] Circular dependency detection at save time with user-friendly error message

## Files Likely Affected

- `src/stores/app.js` — task schema, dependency resolution logic
- `src/components/TaskModal.vue` — dependency selector
- `src/components/TaskCard.vue` — dependency display
- `src/composables/useTaskActions.js` — schedule generation respects dependencies, completion auto-unblocks

## Acceptance Criteria

1. Users can set dependencies between tasks
2. Tasks with unmet dependencies are automatically blocked
3. Completing a prerequisite automatically unblocks its dependents
4. The scheduler respects dependency ordering
5. Circular dependencies are prevented with a clear error message
6. Deleting a prerequisite task cleans up dependency references
